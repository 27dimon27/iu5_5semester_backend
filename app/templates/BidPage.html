<html lang="en">
<head>
    <title>lab1</title>
    <link rel="stylesheet" href="/static/styles/BidPage.css">
</head>
<header>
    <h1><a href="/softwares">Разработка ПО</a></h1>
</header>
<body>
    <h2 class="page-title">Текущая заявка</h2>
    <form method="POST">
        <div class="companies">
            <h2 class="companies-text">Выберите компанию:</h2>
            <select class="companies-select" id="companies-select" name="company">
                {{ $com := .company }}
                {{ range .companies }}
                <option value="{{ . }}" {{ if eq . $com }}selected{{ end }}>{{ . }}</option>
                {{ end }}
            </select>
        </div>
        <div class="titles">
            <p class="titles-icon">#</p>
            <p class="titles-title">Услуга</p>
            <p class="titles-count">Количество</p>
            <p class="titles-grade">Грейд</p>
            <p class="titles-price">Стоимость</p>
        </div>
        {{ range .services }}
        <input type="hidden" name="service_id[]" value="{{ .SoftwareService.ID }}">
        <div class="service-row">
            <div class="service-icon">
                <img src="http://localhost:9000/software-images/{{ .SoftwareService.Image }}" />
            </div>
            <div class="service-title">{{ .SoftwareService.Title }}</div>
            <input class="service-count" id="service-count-{{ .SoftwareService.ID }}" type="number" name="count_{{ .SoftwareService.ID }}" value="{{ .Count }}" min="1" max="100"/>
            <select class="service-grade" id="service-grade" name="grade_{{ .SoftwareService.ID }}">
                {{ $outer := .Grade }}
                {{ range $.keyCoefs }}
                <option value="{{ . }}" {{ if eq . $outer }}selected{{ end }}>{{ . }}</option>
                {{ end }}
            </select>
            <div class="service-price">{{ .Sum }} руб</div>
        </div>
        {{ end }}

        <div class="final-cost-n-choose-btns">
            <div class="final-cost">
                <div class="final-cost-text">Итоговая стоимость:</div>
                <div class="final-cost-result">{{ .sum }} руб</div>
            </div>
            <div class="choose-btns">
                <button type="submit" class="choose-btn-calc" formaction="/software-bids/calc-software-bid/{{ .bidID }}">Рассчитать</button>
                <button type="submit" class="choose-btn-del" formaction="/software-bids/delete-software-bid/{{ .bidID }}">Удалить</button>
                <button class="choose-btn-add">Добавить</button>
            </div>
        </div>
    </form>
</body>
</html> 